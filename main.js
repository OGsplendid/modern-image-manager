!function(){"use strict";class e{constructor(e){this.element=e,this.count=0,this.urlList=[],this.onCloseBtnClick=this.onCloseBtnClick.bind(this),this.element.addEventListener("click",this.onCloseBtnClick)}static createLi(e,t){return`\n      <li class="img-item">\n      <img src="${t}" class="img">\n        <div class="close-button">X</div>\n        <span class="img-discription">${e}</span>\n      </li>\n    `}addToArray(e){this.urlList.push(e)}clear(){this.element.querySelectorAll(".img-item").forEach((e=>e.remove()))}render(){this.clear(),this.urlList.forEach((t=>{const i=e.createLi(t.description,t.url);this.element.insertAdjacentHTML("beforeend",i)}))}onCloseBtnClick(e){if(!e.target.classList.contains("close-button"))return;const t=e.target.closest(".img-item"),i=t.querySelector(".img").getAttribute("src"),n=this.urlList.findIndex((e=>e.url===i));this.urlList.splice(n,1),t.remove()}}class t{constructor(i){this.element=i,this.gallery=new e(document.querySelector(".bottom-container")),this.bottomContainer=document.querySelector(".bottom-container"),this.fileContainer=this.element.querySelector(".file-container"),this.fileInput=document.querySelector(".input"),this.onClick=this.onClick.bind(this),this.onChange=this.onChange.bind(this),this.onDrop=this.onDrop.bind(this),this.fileContainer.addEventListener("click",this.onClick),this.fileContainer.addEventListener("dragleave",t.onDragleave),this.fileContainer.addEventListener("dragover",t.onDragover),this.fileContainer.addEventListener("drop",this.onDrop),this.fileInput.addEventListener("change",this.onChange)}static onDragover(e){e.preventDefault(),e.target.classList.remove("normal-state"),e.target.classList.add("dragged")}static onDragleave(e){e.preventDefault(),e.target.classList.add("normal-state"),e.target.classList.remove("dragged")}onDrop(e){e.preventDefault();const t=e.dataTransfer.files&&e.dataTransfer.files[0],i=new FileReader,n=performance.now();i.addEventListener("load",(e=>{const i={url:`${e.target.result}#${n}`,description:t.name};this.gallery.addToArray(i),this.gallery.render()})),i.readAsDataURL(t),e.target.classList.add("normal-state"),e.target.classList.remove("dragged")}onChange(){if(this.fileInput.files&&this.fileInput.files.length>1){for(let e=0;e<this.fileInput.files.length;e+=1){const t=this.fileInput.files[e],i=performance.now()+e,n=new FileReader;n.addEventListener("load",(e=>{const n={url:`${e.target.result}#${i}`,description:t.name};this.gallery.addToArray(n),this.gallery.render()})),n.readAsDataURL(t)}return}const e=this.fileInput.files&&this.fileInput.files[0];if(!e)return;const t=performance.now(),i=new FileReader;i.addEventListener("load",(i=>{const n={url:`${i.target.result}#${t}`,description:e.name};this.gallery.addToArray(n),this.gallery.render()})),i.readAsDataURL(e),console.log(t)}onClick(){this.fileInput.dispatchEvent(new MouseEvent("click"))}}new t(document.querySelector(".top-container"))}();
//# sourceMappingURL=main.js.map